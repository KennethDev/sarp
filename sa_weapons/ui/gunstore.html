<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<!-- Bootstrap Core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<!-- Custom CSS -->
		<link href="css/homepage.css" rel="stylesheet">
		<script src="js/jquery.js" type="text/javascript"></script>
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		<style>
			.hidden {
				display: none;
			}
			.box {
				border-radius: 5px !important;
				border: 1px solid black !important;
				min-height: 25%;
				text-align: center;
				overflow: hidden;
			}
			.weapon {
				width: 110% !important;
				position: relative;
				left: -5%;
				right: -5%;
			}
			.btn {
				padding: 5px;
			}
			.box > .btn {
				width: 110%;
				position: relative;
				left: -5%;
				right: -5%;
			}
		</style>
	</head>
	<body>
		<img id="cursor" src="cursor.webp" style="position: absolute; display:none; z-index: 99;">
		<div class="atm">
			<div class="header">
				<center>
					<img style="height:100%" src="logo.png">
				</center>
			</div>
			<div class="row">
				<div class="col-md-9">
					<div class="container" id="display">
					</div>
				</div>
				<div class="col-md-3">
					<button id="home" class="btn btn-primary btn-block" onclick="pageHome()">Home</button>
					<button id="melee" class="btn btn-secondary btn-block" onclick="pageMelee()">Melee</button>
					<button id="handguns" class="btn btn-secondary btn-block" onclick="pageHandgun()">Handguns</button>
					<button id="rifles" class="btn btn-secondary btn-block" onclick="pageRifles()">Rifles</button>
					<button id="thrown" class="btn btn-secondary btn-block" onclick="pageThrown()">Thrown</button>
					<button class="btn btn-danger btn-block" id="exit" onclick="btnExit()">Exit</button>
				</div>
			</div>
		</div>
		<div id="home_template" class="hidden">
			<h3>Welcome to Ammunation!</h3>
			<p><b>Note:</b> If you can't read some of the weapon names, please increase your game resolution.</p>
		</div>
		<div id="melee_template" class="hidden">
			<br />
			<div class="row">
				<div class="col-md-3">
					<div class="container box">
						<img src="https://wiki.gtanet.work/images/thumb/5/54/weapon_-1716189206.png/120px-weapon_-1716189206.png" class="weapon">
						<h5>Knife</h5>
						<button class="btn btn-success btn-block" onclick="buy('WEAPON_KNIFE', 1, 400)">$400</button>
					</div>
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
			</div>
		</div>
		<div id="handgun_template" class="hidden">
			<br />
			<div class="row">
				<div class="col-md-3">
					<div class="container box">
						<img src="https://wiki.gtanet.work/images/thumb/9/9b/weapon_453432689.png/120px-weapon_453432689.png" class="weapon">
						<h5>Pistol</h5>
						<button class="btn btn-success btn-block" onclick="buy('WEAPON_PISTOL', 200, 2500)">$2,500</button>
						<button class="btn btn-primary btn-block">Ammo $250</button>
					</div>
				</div>
				<div class="col-md-3">
					<div class="container box">
						<img src="https://wiki.gtanet.work/images/thumb/6/60/weapon_-1076751822.png/120px-weapon_-1076751822.png" class="weapon">
						<h5>SNS Pistol</h5>
						<button class="btn btn-success btn-block" onclick="buy('WEAPON_SNSPISTOL', 200, 2750)">$2,750</button>
						<button class="btn btn-primary btn-block">Ammo $275</button>
					</div>
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
			</div>
		</div>
		<div id="rifle_template" class="hidden">
			<br />
			<div class="row">
				<div class="col-md-3">
					<div class="container box">
						<img src="https://wiki.gtanet.work/images/thumb/c/c5/weapon_-1074790547.png/120px-weapon_-1074790547.png" class="weapon">
						<h5>Assault Rifle</h5>
						<button class="btn btn-success btn-block" onclick="buy('WEAPON_ASSAULTRIFLE', 200, 8550)">$8,550</button>
						<button class="btn btn-primary btn-block">Ammo $855</button>
					</div>
				</div>
				<div class="col-md-3">
					<div class="container box">
						<img src="https://wiki.gtanet.work/images/thumb/8/8b/weapon_-2084633992.png/120px-weapon_-2084633992.png" class="weapon">
						<h5>Carbine Rifle</h5>
						<button class="btn btn-success btn-block" onclick="buy('WEAPON_CARBINERIFLE', 200, 13000)">$13,000</button>
						<button class="btn btn-primary btn-block">Ammo $1,300</button>
					</div>
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
			</div>
		</div>
		<div id="thrown_template" class="hidden">
			<br />
			<div class="row">
				<div class="col-md-3">
					<div class="container box">
						<img src="https://wiki.gtanet.work/images/thumb/7/73/weapon_126349499.png/120px-weapon_126349499.png" class="weapon">
						<h5>Snowball</h5>
						<button class="btn btn-success btn-block" onclick="buy('WEAPON_SNOWBALL', 20, 1)">$1</button>
					</div>
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
				<div class="col-md-3">
					&nbsp;
				</div>
			</div>
		</div>
		<script src="js/jquery.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script>
			var documentWidth = document.documentElement.clientWidth;
			var documentHeight = document.documentElement.clientHeight;
			
			var cursor = document.getElementById("cursor");
			var cursorX = documentWidth / 2;
			var cursorY = documentHeight / 2;
			
			page("home");

			function page(id) {
				$("#home").removeClass("btn-primary");
				$("#melee").removeClass("btn-primary");
				$("#handguns").removeClass("btn-primary");
				$("#rifles").removeClass("btn-primary");
				$("#shotguns").removeClass("btn-primary");
				$("#thrown").removeClass("btn-primary");
				$("#home").addClass("btn-secondary");
				$("#melee").addClass("btn-secondary");
				$("#handguns").addClass("btn-secondary");
				$("#rifles").addClass("btn-secondary");
				$("#shotguns").addClass("btn-secondary");
				$("#thrown").addClass("btn-secondary");
				if (id == "home") {
					$("#display").html($("#home_template").html());
					$("#home").removeClass("btn-secondary");
					$("#home").addClass("btn-primary");
				} else if (id == "melee") {
					$("#display").html($("#melee_template").html());
					$("#melee").removeClass("btn-secondary");
					$("#melee").addClass("btn-primary");
				} else if (id == "handgun") {
					$("#display").html($("#handgun_template").html());
					$("#handguns").removeClass("btn-secondary");
					$("#handguns").addClass("btn-primary");
				} else if (id == "rifles") {
					$("#display").html($("#rifle_template").html());
					$("#rifles").removeClass("btn-secondary");
					$("#rifles").addClass("btn-primary");
				} else if (id == "thrown") {
					$("#display").html($("#thrown_template").html());
					$("#thrown").removeClass("btn-secondary");
					$("#thrown").addClass("btn-primary");
				}
			}

			function buy(name, amount, cost) {
				$.post('http://sa_weapons/purchase', JSON.stringify({weapon: name, amount: amount, cost: cost}));
			}

			function UpdateCursorPos() {
			    $(cursor).css('left', cursorX)
			    $(cursor).css('top', cursorY)
			}
			
			function Click(x, y) {
			    var element = $(document.elementFromPoint(x, y));
			    element.focus().click();
			}

			//$("#deposit").click(pageDeposit);
			//$("#withdraw").click(pageWithdraw);
			$("#exit").click(btnExit);

			function pageHome() {
				page("home");
			}

			function pageMelee() {
				page("melee");
			}

			function pageHandgun() {
				page("handgun");
			}
			
			function pageRifles() {
				page("rifles");
			}

			function pageThrown() {
				page("thrown");
			}

			function btnExit() {
				pageHome()
				$.post('http://sa_weapons/escape', JSON.stringify({}));
			}

			$(function() {
				$(cursor).css('display', "none");
				$("body").css('display', "none");
				$("body").css('background', 'none');
			    window.addEventListener('message', function(event) {
			        if (event.data.type == "enablestore") {
			            $(cursor).css('display', event.data.enable ? "block" : "none");
			            $("body").css('display', event.data.enable ? "block" : "none");
			            $("body").css('background', event.data.enable ? "white" : "none");
			        } else if (event.data.type == "click") {
			            // Avoid clicking the cursor itself, click 1px to the top/left;
			            Click(cursorX - 1, cursorY - 1);
			        }
			    });
			
			    $(document).mousemove(function(event) {
			        cursorX = event.pageX;
			        cursorY = event.pageY;
			        UpdateCursorPos();
			    });
			
			    document.onkeyup = function (data) {
			        if (data.which == 27) { // Escape key
			            $.post('http://sa_weapons/escape', JSON.stringify({}));
			            pageHome();
			        }
			    };
			});
			function checkAlpha(text) {
				var letters = /^[A-Za-z]+$/;
				if (text.match(letters)) {
					return true;
				} else {
					return false;
				}
			}
		</script>
	</body>
</html>